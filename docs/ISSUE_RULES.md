# Issue運用ルール

このドキュメントでは、GitHubのIssue運用に関するルールを定義します。

---

## Issueの目的

- **作業内容の明確化**
- **タスクの管理**
- **議論の記録**
- **進捗の可視化**

---

## Issueのタイトル形式

```
[type] 概要
```

**例**:
```
[feat] ユーザー検索機能の追加
[fix] ログイン時のバリデーションエラー
[docs] API仕様書の更新
```

### type一覧

| type | 用途 | 例 |
|------|------|---|
| `feat` | 新機能 | `[feat] ユーザー検索機能の追加` |
| `fix` | バグ修正 | `[fix] ログインエラーの修正` |
| `docs` | ドキュメント | `[docs] README更新` |
| `refactor` | リファクタリング | `[refactor] UserServiceの整理` |
| `test` | テスト | `[test] E2Eテストの追加` |
| `chore` | その他 | `[chore] 依存関係の更新` |
| `perf` | パフォーマンス改善 | `[perf] クエリの最適化` |

---

## Issueテンプレート

### 機能追加（feature）

`.github/ISSUE_TEMPLATE/feature.md` を使用してください。

```markdown
## 概要

ユーザー検索機能を追加する

## 背景・目的

管理者がユーザーを検索できるようにしたい

## 実現したいこと

- [ ] 名前で検索
- [ ] メールアドレスで検索
- [ ] 登録日で絞り込み
- [ ] ページネーション

## 受け入れ条件

- [ ] 検索APIが動作する
- [ ] フロントエンドで検索フォームが表示される
- [ ] テストが書かれている
- [ ] ドキュメントが更新されている

## 備考

パフォーマンスに注意すること
```

### バグ報告（bug）

`.github/ISSUE_TEMPLATE/bug.md` を使用してください。

```markdown
## 概要

ログイン時にバリデーションエラーが発生する

## 再現手順

1. ログイン画面を開く
2. メールアドレスに「test@」を入力
3. パスワードに「password」を入力
4. 「ログイン」ボタンをクリック

## 期待する動作

「メールアドレスの形式が正しくありません」というエラーメッセージが表示される

## 実際の動作

500エラーが発生する

## 環境

- OS: Windows 11
- ブラウザ: Chrome 120
- バージョン: v1.2.3

## 備考

スタックトレースを添付
```

---

## ラベル

### ラベル一覧

| ラベル | 用途 | 色 |
|-------|------|---|
| `feat` | 新機能 | 🟦 青 |
| `fix` | バグ修正 | 🟥 赤 |
| `docs` | ドキュメント | 📘 水色 |
| `refactor` | リファクタリング | 🟨 黄色 |
| `test` | テスト | 🟩 緑 |
| `chore` | その他 | ⬜ 灰色 |
| `perf` | パフォーマンス | 🟪 紫 |
| `priority: high` | 優先度: 高 | 🔴 赤 |
| `priority: medium` | 優先度: 中 | 🟡 黄色 |
| `priority: low` | 優先度: 低 | 🟢 緑 |
| `status: in progress` | 作業中 | 🔵 青 |
| `status: blocked` | ブロック中 | 🟠 オレンジ |
| `status: reviewing` | レビュー中 | 🟣 紫 |
| `help wanted` | ヘルプ募集 | 🆘 緑 |
| `good first issue` | 初心者向け | 🎓 緑 |

### ラベルの使い方

```
例: 優先度高の新機能
ラベル: feat, priority: high

例: ブロック中のバグ修正
ラベル: fix, status: blocked
```

---

## Issueの作成

### `/create-issue` コマンドの使用

Claude Codeを使用している場合は、`/create-issue` コマンドでIssueを作成できます。

```
/create-issue
```

コマンドが以下を自動で行います：

1. **type判断** - 作業内容からtypeを判断
2. **テンプレート適用** - feature.md または bug.md
3. **ラベル選択** - 適切なラベルを提案
4. **Issue作成** - `gh issue create` で作成

### 手動でIssueを作成する場合

```bash
gh issue create --title "[feat] ユーザー検索機能の追加" --body "..."
```

---

## Issueのアサイン

### 基本ルール

- **作業を開始する人が自分にアサインする**
- **1つのIssueには1人をアサイン**（複数人で作業する場合は分割）
- **アサインされたIssueは責任を持って完了させる**

### アサイン方法

```bash
# GitHubのWeb UIでアサイン

# または GitHub CLI
gh issue edit 123 --add-assignee @me
```

---

## Issueのクローズ

### 自動クローズ

PRのコミットメッセージまたはPR本文に以下を含めると、マージ時に自動でクローズされます。

```
Closes #123
Fixes #456
Resolves #789
```

**例**:

```markdown
## 関連Issue

Closes #123
```

### 手動クローズ

```bash
gh issue close 123 --comment "修正完了しました"
```

---

## Issueのステータス管理

### ステータスラベルの使用

作業の進捗に応じて、ステータスラベルを更新してください。

```
作成時: (ラベルなし)
   ↓
作業開始: status: in progress
   ↓
ブロック: status: blocked（必要に応じて）
   ↓
レビュー: status: reviewing
   ↓
完了: (Issueクローズ)
```

### コメントでの進捗報告

定期的にコメントで進捗を報告してください。

```markdown
## 進捗報告

- [x] API実装完了
- [x] テスト作成完了
- [ ] フロントエンド実装中

明日中に完了予定です。
```

---

## Issueのリンク

### PRとのリンク

PRを作成する際は、必ず関連Issueをリンクしてください。

```markdown
## 関連Issue

Closes #123
```

### 他のIssueとのリンク

関連するIssueがある場合は、リンクしてください。

```markdown
## 関連Issue

- #456 の実装に依存しています
- #789 と同じ問題かもしれません
```

---

## Issueのマイルストーン

### マイルストーンの使用

リリースごとにマイルストーンを作成し、Issueを紐付けます。

```
マイルストーン: v1.0.0
- [feat] ユーザー検索機能の追加 #123
- [fix] ログインエラーの修正 #456
- [docs] API仕様書の更新 #789
```

---

## Issue作成のベストプラクティス

### 1. 明確なタイトルをつける

```
✅ 良い例:
[feat] ユーザー検索機能の追加
[fix] ログイン時のバリデーションエラー

❌ 悪い例:
バグ修正
機能追加
```

### 2. 具体的な内容を記述する

- **何をするのか**を明確にする
- **なぜ必要なのか**を説明する
- **受け入れ条件**を明記する

### 3. スクリーンショットを添付する

UIに関するIssueの場合は、スクリーンショットを添付してください。

### 4. 適切なラベルを付ける

- **typeラベル**（feat, fix等）
- **優先度ラベル**（必要に応じて）
- **ステータスラベル**（作業開始時）

### 5. 小さく分割する

大きなIssueは、小さなIssueに分割してください。

```
❌ 悪い例:
[feat] ユーザー管理機能の実装

✅ 良い例:
[feat] ユーザー一覧機能の実装
[feat] ユーザー作成機能の実装
[feat] ユーザー編集機能の実装
[feat] ユーザー削除機能の実装
```

---

## 禁止事項

- ❌ **タイトルが不明確なIssue**（「バグ」「修正」等）
- ❌ **受け入れ条件がないIssue**
- ❌ **大きすぎるIssue**（分割できる場合は分割する）
- ❌ **重複するIssue**（作成前に検索する）

---

## 参考資料

- [.github/ISSUE_TEMPLATE/feature.md](.github/ISSUE_TEMPLATE/feature.md) - 機能追加テンプレート
- [.github/ISSUE_TEMPLATE/bug.md](.github/ISSUE_TEMPLATE/bug.md) - バグ報告テンプレート
- [GIT_RULES.md](GIT_RULES.md) - Git運用ルール

---

## 更新履歴

- **[日付]**: ドキュメント作成
