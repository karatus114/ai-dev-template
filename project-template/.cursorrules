# Cursor Rules

このプロジェクトのルールは AGENTS.md および docs/ 配下に定義されています。

## 参照すべきファイル

- **AGENTS.md**: AI向けの基本指示
- **docs/CODING_RULES.md**: コード規約
- **docs/ARCHITECTURE.md**: 設計方針
- **docs/DATABASE.md**: DB設計ルール
- **docs/LOGGING.md**: ログ規約
- **docs/GIT_RULES.md**: Git運用ルール
- **docs/SECURITY.md**: セキュリティ設計
- **docs/TESTING.md**: テスト方針
- **docs/WORKFLOW.md**: 開発の進め方

## MCP

Context7を使用して、ライブラリの最新ドキュメントを参照すること。

```
# 使用例
Context7でReactの最新のuseEffectの使い方を確認
Context7でFastAPIのミドルウェアのベストプラクティスを確認
```

## コード生成時の注意

### 必須事項

- ✅ 実装前にテストを作成する（TDD）
- ✅ docs/SECURITY.md のルールを遵守する
- ✅ 不明点はドキュメントを確認してから実装する
- ✅ エラーハンドリングを必ず実装する
- ✅ 入力検証を必ず実装する

### 禁止事項

- ❌ ドキュメントを読まずに実装する
- ❌ テストなしで実装する
- ❌ セキュリティ対策を省略する
- ❌ 機密情報をハードコードする
- ❌ 大きな変更を一度に行う

## 開発フロー

1. **テスト作成** - `/create-test` コマンド推奨
2. **実装** - `/implement-for-test` コマンド推奨
3. **レビュー** - `/code-review` コマンド推奨
4. **コミット** - `/commit` コマンド推奨（Conventional Commits形式）
5. **PR作成** - `/create-pr` コマンド推奨

## スラッシュコマンド

`.claude/commands/` 配下にスラッシュコマンドが定義されています。
Cursorでも同じコマンドが使用可能です（シンボリックリンク経由）。

## セキュリティチェックリスト

コード生成時、以下を必ず確認してください：

- [ ] 入力検証が実装されているか
- [ ] SQLインジェクション対策（ORM使用、パラメータバインディング）
- [ ] 機密情報のハードコードがないか
- [ ] 認証・認可が適切に実装されているか
- [ ] XSS対策（ユーザー入力のエスケープ）
- [ ] エラーメッセージに機密情報が含まれていないか

詳細は docs/SECURITY.md を参照してください。
