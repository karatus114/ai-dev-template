# AI コーディングエージェント向け指示書

このドキュメントは、AI駆動開発をサポートするコーディングエージェント向けの基本指示書です。

## プロジェクト概要

**[`/init-project` を実行してプロジェクト概要を設定してください]**

---

## 技術スタック

**[`/init-project` を実行して技術スタックを設定してください]**

---

## セットアップコマンド

**[`/init-project` を実行してセットアップコマンドが生成されます]**

---

## 重要なドキュメント

このプロジェクトでは、以下のドキュメントに開発ルールと方針が定義されています。
コードを書く前に、必ず該当するドキュメントを参照してください。

### 必須参照ドキュメント

| ドキュメント | 内容 |
|------------|------|
| [docs/CODING_RULES.md](docs/CODING_RULES.md) | コード規約・命名規則 |
| [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md) | 設計方針・レイヤー構成 |
| [docs/DATABASE.md](docs/DATABASE.md) | データベース設計ルール |
| [docs/LOGGING.md](docs/LOGGING.md) | ログ出力規約 |
| [docs/SECURITY.md](docs/SECURITY.md) | セキュリティ設計・対策 |
| [docs/TESTING.md](docs/TESTING.md) | テスト方針（TDD） |
| [docs/WORKFLOW.md](docs/WORKFLOW.md) | 開発の進め方 |

### Git運用

| ドキュメント | 内容 |
|------------|------|
| [docs/GIT_RULES.md](docs/GIT_RULES.md) | コミット・ブランチ・PR規約 |
| [docs/ISSUE_RULES.md](docs/ISSUE_RULES.md) | Issue運用ルール |

---

## 基本原則

### 1. TDD（テスト駆動開発）の徹底

- **実装前にテストを作成する**
- テストがパスする最小限の実装を行う
- 詳細は [docs/TESTING.md](docs/TESTING.md) を参照

### 2. セキュリティファースト

- 入力検証を必ず実装する
- 機密情報をハードコードしない
- 詳細は [docs/SECURITY.md](docs/SECURITY.md) を参照

### 3. 小さく作る

- 1つの機能ごとに実装→テスト→レビュー→マージ
- 大きな変更は小さな単位に分割する
- 詳細は [docs/WORKFLOW.md](docs/WORKFLOW.md) を参照

### 4. ドキュメントを参照してから実装する

- 不明点がある場合は、該当するドキュメントを必ず確認する
- ドキュメントにない場合は、開発者に質問する

---

## コード規約の概要

詳細は [docs/CODING_RULES.md](docs/CODING_RULES.md) を参照してください。

### 命名規則

**[`/init-project` で技術スタックに応じた命名規則が設定されます]**

### コメントルール

- コードを見れば分かることは書かない
- **なぜそうするのか**（Why）を書く
- 複雑なロジックには必ず説明を追加

### インポート順序

1. 標準ライブラリ
2. サードパーティライブラリ
3. プロジェクト内モジュール

---

## 禁止事項

### コード生成時

- ❌ ドキュメントを読まずに実装する
- ❌ テストなしで実装する
- ❌ セキュリティ対策を省略する
- ❌ エラーハンドリングを省略する
- ❌ ハードコードされた機密情報
- ❌ 大きな変更を一度に行う

### コミット時

- ❌ Conventional Commits形式以外のコミットメッセージ
- ❌ 複数の変更を1つのコミットにまとめる
- ❌ テストが失敗している状態でのコミット

---

## MCP（Model Context Protocol）の利用

### Context7

最新のライブラリドキュメントを参照する際は、Context7 MCPを使用してください。

```
# 使用例
Context7でReactの最新のHooksの使い方を確認
Context7でFastAPIのセキュリティベストプラクティスを確認
```

### その他のMCP

プロジェクトに応じて、以下のMCPが設定されている場合があります：

- **GitHub MCP**: Issue/PRの操作
- **PostgreSQL MCP**: データベース構造の把握

詳細は `.mcp.json` を参照してください。

---

## 開発の進め方

詳細は [docs/WORKFLOW.md](docs/WORKFLOW.md) を参照してください。

### 基本フロー

1. **Issue作成** - `/create-issue` コマンドを使用
2. **ブランチ作成** - Issue番号を含めた命名
3. **テスト作成** - `/create-test` コマンドを使用
4. **実装** - `/implement-for-test` コマンドを使用
5. **コミット** - `/commit` コマンドを使用
6. **PR作成** - `/create-pr` コマンドを使用
7. **レビュー** - `/code-review` コマンドを使用

### フロントエンド先行開発

1. **Phase 1**: 画面モック作成（ダミーデータ使用）
2. **Phase 2**: API仕様設計
3. **Phase 3**: バックエンド実装（TDD）
4. **Phase 4**: フロント・バック結合

---

## 利用可能なスラッシュコマンド

| コマンド | 用途 |
|---------|------|
| `/init-project` | プロジェクト初期設定（最初に1回実行） |
| `/setup` | 新規参画者向けセットアップ |
| `/create-test` | テスト作成（TDD） |
| `/implement-for-test` | テストに対する実装 |
| `/code-review` | コードレビュー |
| `/commit` | コミット作成 |
| `/create-pr` | PR作成 |
| `/create-issue` | Issue作成 |
| `/update-docs` | ドキュメント更新 |
| `/check-rules` | ルール違反チェック |
| `/explain` | コード説明 |

---

## 質問がある場合

1. まず該当するドキュメントを確認する
2. ドキュメントにない場合は、開発者に質問する
3. 不確実な実装は避け、必ず確認を取る

---

## このドキュメントの更新

- 基本方針は開発者が管理します
- 技術スタックの変更は `/init-project` を再実行してください
